{"version":3,"file":"axios-basic-logger.mjs","sources":["../src/index.js"],"sourcesContent":["import uid from \"pico-uid\";\n\nfunction pad(val = \"0\", padding = 2) {\n  return val.toString().padStart(padding, \"0\");\n}\n\nfunction getTimeStamp(date) {\n  return `${pad(date.getHours())}:${pad(date.getMinutes())}:${pad(\n    date.getSeconds()\n  )}:${date.getMilliseconds()}`;\n}\n\nfunction logRequest(request, timestamp) {\n  const { method, url } = request;\n  return `REQUEST  ${timestamp} ${method.toUpperCase()} ${url}`;\n}\n\nfunction logResponse(response, timestamp, msDiff) {\n  const { status, config } = response;\n  return `RESPONSE ${timestamp} ${status} (${config.method.toUpperCase()} ${\n    config.url\n  }) ${msDiff}ms`;\n}\n\nexport default function patchAxios(\n  axios,\n  { requestLogger = logRequest, responseLogger = logResponse } = {}\n) {\n  const requests = {};\n\n  axios.interceptors.request.use(request => {\n    const date = new Date();\n    const str = requestLogger(request, getTimeStamp(date));\n    \n    const logId = uid(30);\n    request.logId = logId;\n    requests[logId] = date;\n\n    console.log(str);\n    return request;\n  });\n\n  axios.interceptors.response.use(response => {\n    const date = new Date();\n    const startDate = requests[response.config.logId];\n\n    delete requests[response.config.logId];\n\n    const str = logResponse(\n      response,\n      getTimeStamp(date),\n      date.getTime() - startDate.getTime()\n    );\n\n    console.log(str);\n    return response;\n  });\n}\n"],"names":["pad","val","padding","toString","padStart","getTimeStamp","date","getHours","getMinutes","getSeconds","getMilliseconds","logRequest","request","timestamp","toUpperCase","url","logResponse","response","msDiff","config","method","axios","ref","requests","interceptors","use","Date","str","requestLogger","logId","uid","console","log","startDate","getTime"],"mappings":"wBAEA,SAASA,EAAIC,EAAWC,yBAAL,oBAAe,GACzBD,EAAIE,WAAWC,SAASF,EAAS,KAG1C,SAASG,EAAaC,UACVN,EAAIM,EAAKC,gBAAeP,EAAIM,EAAKE,kBAAiBR,EAC1DM,EAAKG,kBACFH,EAAKI,kBAGZ,SAASC,EAAWC,EAASC,iCAERA,eAAoBC,kBAAiBC,EAG1D,SAASC,EAAYC,EAAUJ,EAAWK,oCAErBL,oBAAwBM,EAAOC,OAAON,kBACvDK,WACGD,sBAGQ,SACbG,EACAC,kBAA+D,yCAA7CX,yCAA6BK,OAEzCO,EAAW,GAEjBF,EAAMG,aAAaZ,QAAQa,aAAIb,OACvBN,EAAO,IAAIoB,KACXC,EAAMC,EAAchB,EAASP,EAAaC,IAE1CuB,EAAQC,EAAI,WAClBlB,EAAQiB,MAAQA,EAChBN,EAASM,GAASvB,EAElByB,QAAQC,IAAIL,GACLf,IAGTS,EAAMG,aAAaP,SAASQ,aAAIR,OACxBX,EAAO,IAAIoB,KACXO,EAAYV,EAASN,EAASE,OAAOU,cAEpCN,EAASN,EAASE,OAAOU,WAE1BF,EAAMX,EACVC,EACAZ,EAAaC,GACbA,EAAK4B,UAAYD,EAAUC,kBAG7BH,QAAQC,IAAIL,GACLV"}